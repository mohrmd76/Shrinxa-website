<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Shrinxa â€“ Create Account</title>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
body {
    font-family: Arial, sans-serif;
    background: #f1f1f1;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
}
.container {
    background: #fff;
    padding: 35px;
    border-radius: 12px;
    box-shadow: 0 4px 14px rgba(0,0,0,0.1);
    width: 420px;
}
h2 {
    text-align: center;
}
input, select {
    width: 100%;
    padding: 12px;
    margin: 6px 0 14px;
    border-radius: 6px;
    border: 1px solid #ccc;
}
button {
    width: 100%;
    padding: 12px;
    background: #28a745;
    color: #fff;
    border: none;
    border-radius: 6px;
    font-size: 16px;
    cursor: pointer;
}
button:hover {
    background: #218838;
}
</style>
</head>

<body>
<div class="container">
<h2>Create Account</h2>

<input id="full_name" placeholder="Full Name *" required />
<input id="company" placeholder="Company Name *" required />
<input id="phone" placeholder="Phone Number *" required />
<input id="address" placeholder="Address *" required />
<input id="city" placeholder="City *" required />

<select id="province" required>
  <option value="">Select Province *</option>
  <option value="AB">Alberta</option>
  <option value="BC">British Columbia</option>
  <option value="MB">Manitoba</option>
  <option value="NB">New Brunswick</option>
  <option value="NL">Newfoundland and Labrador</option>
  <option value="NS">Nova Scotia</option>
  <option value="NT">Northwest Territories</option>
  <option value="NU">Nunavut</option>
  <option value="ON">Ontario</option>
  <option value="PE">Prince Edward Island</option>
  <option value="QC">Quebec</option>
  <option value="SK">Saskatchewan</option>
  <option value="YT">Yukon</option>
</select>

<input id="email" type="email" placeholder="Email *" required />
<input id="password" type="password" placeholder="Password (min 6 chars) *" required />

<button onclick="signup()">Create Account</button>

<p style="text-align:center;margin-top:10px;">
Already have an account? <a href="login.html">Sign In</a>
</p>
</div>

<script>
const supabase = window.supabase.createClient(
  "https://fgrjojxwevllnjdixiyd.supabase.co",
  "sb_publishable_k5D9JKO5lMCHlju-WhlSAQ_XEiEruT_"
);

async function signup() {
  const full_name = full_nameEl.value.trim();
  const company = companyEl.value.trim();
  const phone = phoneEl.value.trim();
  const address = addressEl.value.trim();
  const city = cityEl.value.trim();
  const province = provinceEl.value;
  const email = emailEl.value.trim();
  const password = passwordEl.value.trim();

  if (!full_name || !company || !phone || !address || !city || !province || !email || !password) {
    alert("All fields are required.");
    return;
  }

  if (password.length < 6) {
    alert("Password must be at least 6 characters.");
    return;
  }

  const { data, error } = await supabase.auth.signUp({ email, password });
  if (error) {
    alert(error.message);
    return;
  }

  if (data.user) {
    await supabase.from("profiles").insert({
      id: data.user.id,
      full_name,
      company,
      phone,
      address,
      city,
      province
    });
  }

  alert("Account created successfully. Please sign in.");
  window.location.href = "login.html";
}

// element refs
const full_nameEl = document.getElementById("full_name");
const companyEl = document.getElementById("company");
const phoneEl = document.getElementById("phone");
const addressEl = document.getElementById("address");
const cityEl = document.getElementById("city");
const provinceEl = document.getElementById("province");
const emailEl = document.getElementById("email");
const passwordEl = document.getElementById("password");
</script>
</body>
</html>
