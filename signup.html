<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Create Account | Shrinxa</title>

  <style>
    /* RESET */
    *,
    *::before,
    *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      width: 100%;
      overflow-x: hidden;
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: radial-gradient(1200px 600px at 20% 0%, #173a6b 0%, #070b16 60%, #040814 100%);
      color: #fff;
    }

    /* HEADER */
    header {
      width: 100%;
      border-bottom: 1px solid rgba(255,255,255,0.08);
      background: linear-gradient(180deg, #0b1a33 0%, #070e1f 100%);
    }

    .nav {
      max-width: 1200px;
      margin: 0 auto;
      padding: 16px 24px;
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      align-items: center;
    }

    .nav-left {
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 700;
      letter-spacing: 0.4px;
    }

    .nav-center a {
      color: #cfd7ff;
      text-decoration: none;
      margin-left: 20px;
      font-size: 14px;
    }

    .nav-right a:hover {
      color: #fff;
    }

    /* MAIN */
    main {
      max-width: 1200px;
      margin: 0 auto;
      padding: 60px 24px;
      display: flex;
      justify-content: center;
    }

    .card {
      width: 100%;
      max-width: 520px;
      background: linear-gradient(180deg, #0e1f3c 0%, #0a1329 100%);
      border-radius: 18px;
      padding: 32px;
      box-shadow: 0 30px 80px rgba(0,0,0,0.55);
      border: 1px solid rgba(255,255,255,0.08);
    }

    .card h1 {
      font-size: 24px;
      margin-bottom: 6px;
    }

    .card p {
      font-size: 14px;
      color: #cbd6ff;
      margin-bottom: 24px;
    }

    form {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px 16px;
    }

    .full {
      grid-column: 1 / -1;
    }

    label {
      font-size: 12px;
      color: #cfd7ff;
      margin-bottom: 6px;
      display: block;
    }

    input:not([type="checkbox"]), select {
      width: 100%;
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.06);
      color: #fff;
      font-size: 14px;
    }

    input:not([type="checkbox"]):focus, select:focus {
      outline: none;
      border-color: #3ea6ff;
    }

    .checkbox {
      grid-column: 1 / -1;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 13px;
      color: #cbd6ff;
      margin-top: 8px;
    }

    .actions {
      grid-column: 1 / -1;
      margin-top: 10px;
    }

    button {
      width: 100%;
      padding: 14px;
      border-radius: 999px;
      border: none;
      background: linear-gradient(180deg, #3ea6ff 0%, #1b6fd6 100%);
      color: #041022;
      font-weight: 700;
      font-size: 15px;
      cursor: pointer;
    }

    button:hover {
      filter: brightness(1.05);
    }

    .bottom-text {
      margin-top: 18px;
      font-size: 13px;
      color: #cbd6ff;
      text-align: center;
    }

    .bottom-text a {
      color: #3ea6ff;
      text-decoration: none;
    }

    /* FOOTER */
    footer {
      border-top: 1px solid rgba(255,255,255,0.08);
      padding: 24px;
      text-align: center;
      font-size: 13px;
      color: #9fb2ff;
    }

    @media (max-width: 600px) {
      form {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>

<header>
  <div class="nav">
    <div class="nav-left">
      <strong>SHRINXA</strong>
      <span style="opacity:.7;font-size:12px;">Premium Packaging Solutions</span>
    </div>
    <div class="nav-center" style="display:flex; gap:24px; justify-content:center;">
      <a href="index.html">Home</a>
      <a href="products.html">Products</a>
      <a href="about.html">About</a>
      <a href="delivery.html">Delivery</a>
      <a href="contactus.html">Contact</a>
      <a href="login.html">Sign in</a>
    </div>
  </div>
</header>

<main>
  <div class="card">
    <h1>Create a new account</h1>
    <p>All fields are required. This helps us prepare quotes and delivery faster.</p>

    <!-- Status message (no layout change; uses same spacing as your paragraph) -->
    <div id="statusMsg" style="display:none; margin: -10px 0 18px; font-size:13px; color:#cbd6ff;"></div>

    <form id="signupForm">
      <div>
        <label>Full Name</label>
        <input id="full_name" type="text" autocomplete="name" required>
      </div>
      <div>
        <label>Company Name</label>
        <input id="company" type="text" autocomplete="organization" required>
      </div>

      <div>
        <label>Email</label>
        <input id="email" type="email" autocomplete="email" required>
      </div>
      <div>
        <label>Phone Number</label>
        <input id="phone" type="tel" autocomplete="tel" required>
      </div>

      <div class="full">
        <label>Address</label>
        <input id="address" type="text" autocomplete="street-address" required>
      </div>

      <div>
        <label>City</label>
        <input id="city" type="text" autocomplete="address-level2" required>
      </div>
      <div>
        <label>Province</label>
        <select id="province" required>
          <option value="">Select Province</option>
          <option>Ontario</option>
          <option>Quebec</option>
          <option>British Columbia</option>
          <option>Alberta</option>
        </select>
      </div>

      <div>
        <label>Password</label>
        <input id="password" type="password" autocomplete="new-password" required>
      </div>
      <div>
        <label>Confirm Password</label>
        <input id="confirm_password" type="password" autocomplete="new-password" required>
      </div>

      <div class="checkbox">
        <input id="consent" type="checkbox" required>
        <span>I agree that Shrinxa may contact me with quotes and recommendations.</span>
      </div>

      <div class="actions">
        <button id="submitBtn" type="submit">Create account</button>
      </div>
    </form>

    <div class="bottom-text">
      Already have an account? <a href="login.html">Sign in</a>
    </div>
  </div>
</main>

<footer>
  Â© 2025 Shrinxa. All rights reserved.
</footer>

<!-- Supabase JS (required) -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<!-- Your existing auth.js (DO NOT change it) -->
<script src="auth.js"></script>

<script>
  (function () {
    const form = document.getElementById("signupForm");
    const btn = document.getElementById("submitBtn");
    const statusMsg = document.getElementById("statusMsg");

    function setStatus(text, isError) {
      if (!statusMsg) return;
      statusMsg.style.display = "block";
      statusMsg.style.color = isError ? "#ffb4b4" : "#cbd6ff";
      statusMsg.textContent = text;
    }

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      try {
        if (!window.Auth || !window.Auth.signUpWithProfile) {
          setStatus("Auth is not loaded. Make sure supabase-js and auth.js are included.", true);
          return;
        }

        const full_name = document.getElementById("full_name").value.trim();
        const company = document.getElementById("company").value.trim();
        const email = document.getElementById("email").value.trim();
        const phone = document.getElementById("phone").value.trim();
        const address = document.getElementById("address").value.trim();
        const city = document.getElementById("city").value.trim();
        const province = document.getElementById("province").value.trim();
        const password = document.getElementById("password").value;
        const confirm_password = document.getElementById("confirm_password").value;

        if (password !== confirm_password) {
          setStatus("Passwords do not match.", true);
          return;
        }

        btn.disabled = true;
        btn.textContent = "Creating account...";

        const { user, session } = await window.Auth.signUpWithProfile({
          email,
          password,
          full_name,
          company,
          phone,
          address,
          city,
          province
        });

        // Supabase may require email confirmation; session can be null in that case
        if (!session) {
          setStatus("Account created. Please check your email to confirm, then sign in.", false);
        } else {
          setStatus("Account created successfully. Redirecting to sign in...", false);
        }

        setTimeout(() => {
          window.location.href = "login.html";
        }, 1200);

      } catch (err) {
        const msg = (err && (err.message || err.error_description)) ? (err.message || err.error_description) : "Signup failed.";
        setStatus(msg, true);
      } finally {
        btn.disabled = false;
        btn.textContent = "Create account";
      }
    });
  })();
</script>

</body>
</html>
